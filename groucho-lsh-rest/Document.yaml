language: java
framework:
  name: Spring-Boot
  version: 2.5
info: # High Level information of API
  description: Groucho REST API for test confirmation
  version: 1.0.SNAPSHOT
  title: Groucho LSH REST
  license:
    name: GNU General Public License (GPL ver.3)
    url: http://www.gnu.org/licenses/gpl.txt
host: localhost
port: 8080
basePath: /grouch-rest
tags:
  -
    name: request
    description: Send a Test Request packet with the data of the system status instead of start the In-vivo Testing procedure, the REST API will decide the answer of the relative confirm (second tag).
  -
    name: confirm
    description: Request a Test Confirm packet, the packet is a permission to continue or not, generated by the test request (first tag), to start the In-vivo Testing procedure. The Test Confirm packet may also deny the procedure (e.g., if already tested the same situation).
  -
    name: result
    description: Send a Test Result packet, data is stored and it is used to decide next requests (first tag).
schemes:
  - http #security schemes
paths:
  -
    '/request':
      post:
        tags:
          - request
        summary: Get a Test request packet answer with a HTTP status code
        description: Get a Test Request packet, decide if the situation described should (or not) be tested, return an HTTP STATUS CODE, if 200 means that the decision was taken
        operationId: testRequest
        produces:
          - application/json
        parameters:
          -
            name: id
            in: packet body
            description: Random generated long string used in the next Confirm Packet to refer to this test case
            required: true
            type: string
          -
            name: case
            in: packet body
            description: JSON object that includes all the data required to evaluate the case
            required: true
            type: object In-vivoTestCase
          -
            name: ts
            in: packet body
            description: TimeStamp that refer exactly when this packet was generated
            required: true
            type: timestamp
        responses:
          '200':
            description: Successful operation
          '400':
            description: Packet does not respect the required format
  -
    '/confirm':
      get:
        tags:
          - confirm
        summary: Answer with the decision
        description: The Test Confirm packet received gets updated and sent back, the update say if the system should procede with the test or not
        operationId: getConfirm
        produces:
          - application/json
        parameters:
          -
            name: caseId
            in: path variable
            description: ID of the refered In-vivo Test case
            required: true
            type: string
        responses:
          '200':
            description: Successful operation
            schema:
              $ref: '/definitions/In-vivoTestConfirm'
          '400':
            description: Invalid In-vivo Test case supplied
          '404':
            description: In-vivo Test case not found
  -
    '/result':
      post:
        tags:
          - result
        summary: Returns the In-vivo test output
        description: At the end of the test, at the end of the 9th step of the In-vivo testing flowchart, the output produced must be sent to the REST API
        operationId: sendResult # Java function
        produces:
          - application/json #Response content type
        parameters:
          -
            name: case #Input parameter
            in: packet body
            description: The data of the Test case
            required: true
            type: object In-vivoTestCase
          -
            name: result
            in: packet body
            description: True or False if the In-vivo Test procedure succeded or not
            required: true
            type: boolean
          -
            name: output
            in: packet body
            description: The test logs
            required: true
            type: string
        responses:
          '200':
            description: Data accepted
          '400':
            description: Data refused
definitions:
  -
    In-vivoTestConfirm:
      type: object
      properties:
        id:
          type: string
          description: It's the same id that was sent to this REST API in the Request
        test:
          type: boolean
          description: True if the 6th step of the In-vivo Testing flowchart decide that this is the right situation to test the function, false otherwise (probably, most of the implementation will never send this packet if false)
        ts:
          type: TimeStamp
          description: TimeStamp that refer exactly when this packet was generated
      xml:
        name: in-vivo-confirm
  -
    In-vivoTestCase: #Employee Object
      type: object
      properties: #Object properties
        #This object must be discussed
      xml:
        name: in-vivo-case